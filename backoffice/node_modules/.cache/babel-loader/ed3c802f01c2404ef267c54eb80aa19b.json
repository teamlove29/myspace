{"ast":null,"code":"var _jsxFileName = \"/Users/teem/Developer/lampang-myspace/backoffice/src/pages/auth/Login.js\";\nimport React, { useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { Link } from \"react-router-dom\";\nimport { useFormik } from \"formik\";\nimport * as Yup from \"yup\";\nimport firebase from \"../../config/config\";\n\nfunction Login() {\n  const history = useHistory();\n  const [loading, setLoading] = useState(false);\n  const initialValues = {\n    // email: \"\",\n    // password: \"\",\n    email: \"admin@admin.com\",\n    password: \"adminadmin\"\n  };\n\n  const enableLoading = () => {\n    setLoading(true);\n  };\n\n  const disableLoading = () => {\n    setLoading(false);\n  }; //ถ้ากดช่องอินพุต + formik.errors ให้ invalid\n\n\n  const getInputClasses = fieldname => {\n    if (formik.touched[fieldname] && formik.errors[fieldname]) {\n      return \"is-invalid\";\n    }\n\n    if (formik.touched[fieldname] && !formik.errors[fieldname]) {\n      return \"is-valid\";\n    }\n\n    return \"\";\n  };\n\n  const LoginSchema = Yup.object().shape({\n    email: Yup.string().email(\"Invalid email\").min(3, \"Minimum 3 symbols\").max(50, \"Maximum 50 symbols\").required(\"Required\"),\n    password: Yup.string().min(3, \"Minimum 3 symbols\").max(50, \"Maximum 50 symbols\").required(\"Required\")\n  });\n  const formik = useFormik({\n    initialValues,\n    validationSchema: LoginSchema,\n    onSubmit: (value, {\n      setStatus,\n      setSubmitting\n    }) => {\n      enableLoading();\n      setTimeout(() => {\n        firebase.auth().signInWithEmailAndPassword(value.email, value.password).then(values => {\n          disableLoading();\n          window.location.href = \"/dashboard\"; // history.push('/dashboard')\n        }).catch(error => {\n          var errorCode = error.code;\n          var errorMessage = error.message;\n          formik.handleReset();\n          disableLoading();\n          setSubmitting(false);\n          setStatus(errorMessage);\n        });\n      }, 1000);\n    }\n  });\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"login-form login-signin\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"text-center mb-10 mb-lg-20\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    className: \"font-size-h1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }\n  }, \"Login Account\"), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"text-muted font-weight-bold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 9\n    }\n  }, \"Enter your email or username and password\")), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: formik.handleSubmit,\n    className: \"form fv-plugins-bootstrap fv-plugins-framework\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }\n  }, formik.status ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mb-10 alert alert-custom alert-light-danger alert-dismissible\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"alert-text font-weight-bold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 13\n    }\n  }, formik.status)) : null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group fv-plugins-icon-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", Object.assign({\n    placeholder: \"Email\",\n    type: \"email\",\n    className: `form-control form-control-solid h-auto py-5 px-6 ${getInputClasses(\"email\")}`,\n    name: \"email\"\n  }, formik.getFieldProps(\"email\"), {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 11\n    }\n  })), formik.touched.email && formik.errors.email ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"fv-plugins-message-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"fv-help-block\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 15\n    }\n  }, formik.errors.email)) : null), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group fv-plugins-icon-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", Object.assign({\n    placeholder: \"Password\",\n    type: \"password\",\n    className: `form-control form-control-solid h-auto py-5 px-6 ${getInputClasses(\"password\")}`,\n    name: \"password\"\n  }, formik.getFieldProps(\"password\"), {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 11\n    }\n  })), formik.touched.password && formik.errors.password ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"fv-plugins-message-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"fv-help-block\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 15\n    }\n  }, formik.errors.password)) : null), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group d-flex flex-wrap justify-content-between align-items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/auth/forgot-password\",\n    className: \"text-dark-50 text-hover-primary my-3 mr-2\",\n    id: \"kt_login_forgot\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 11\n    }\n  }, \"Forgot Password\"), /*#__PURE__*/React.createElement(\"button\", {\n    id: \"kt_login_signin_submit\",\n    type: \"submit\",\n    disabled: formik.isSubmitting,\n    className: `btn btn-primary font-weight-bold px-9 py-4 my-3`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 13\n    }\n  }, \"Sign In\"), loading && /*#__PURE__*/React.createElement(\"span\", {\n    className: \"ml-3 spinner spinner-white\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 25\n    }\n  })))));\n}\n\nexport default Login;","map":{"version":3,"sources":["/Users/teem/Developer/lampang-myspace/backoffice/src/pages/auth/Login.js"],"names":["React","useState","useHistory","Link","useFormik","Yup","firebase","Login","history","loading","setLoading","initialValues","email","password","enableLoading","disableLoading","getInputClasses","fieldname","formik","touched","errors","LoginSchema","object","shape","string","min","max","required","validationSchema","onSubmit","value","setStatus","setSubmitting","setTimeout","auth","signInWithEmailAndPassword","then","values","window","location","href","catch","error","errorCode","code","errorMessage","message","handleReset","handleSubmit","status","getFieldProps","isSubmitting"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { Link } from \"react-router-dom\";\nimport { useFormik } from \"formik\";\nimport * as Yup from \"yup\";\nimport firebase from \"../../config/config\";\nfunction Login() {\n  const history = useHistory();\n  const [loading, setLoading] = useState(false);\n  const initialValues = {\n    // email: \"\",\n    // password: \"\",\n    email: \"admin@admin.com\",\n    password: \"adminadmin\",\n  };\n\n  const enableLoading = () => {\n    setLoading(true);\n  };\n  const disableLoading = () => {\n    setLoading(false);\n  };\n\n  //ถ้ากดช่องอินพุต + formik.errors ให้ invalid\n  const getInputClasses = (fieldname) => {\n    if (formik.touched[fieldname] && formik.errors[fieldname]) {\n      return \"is-invalid\";\n    }\n    if (formik.touched[fieldname] && !formik.errors[fieldname]) {\n      return \"is-valid\";\n    }\n    return \"\";\n  };\n\n  const LoginSchema = Yup.object().shape({\n    email: Yup.string()\n      .email(\"Invalid email\")\n      .min(3, \"Minimum 3 symbols\")\n      .max(50, \"Maximum 50 symbols\")\n      .required(\"Required\"),\n    password: Yup.string()\n      .min(3, \"Minimum 3 symbols\")\n      .max(50, \"Maximum 50 symbols\")\n      .required(\"Required\"),\n  });\n\n  const formik = useFormik({\n    initialValues,\n    validationSchema: LoginSchema,\n    onSubmit: (value, { setStatus, setSubmitting }) => {\n      enableLoading();\n      setTimeout(() => {\n        firebase\n          .auth()\n          .signInWithEmailAndPassword(value.email, value.password)\n          .then((values) => {\n            disableLoading();\n            window.location.href = \"/dashboard\";\n            // history.push('/dashboard')\n          })\n          .catch((error) => {\n            var errorCode = error.code;\n            var errorMessage = error.message;\n            formik.handleReset()\n            disableLoading();\n            setSubmitting(false);\n            setStatus(errorMessage);\n         \n          });\n      }, 1000);\n    },\n  });\n\n  return (\n    <div className=\"login-form login-signin\">\n      {/* begin::Head */}\n      <div className=\"text-center mb-10 mb-lg-20\">\n        <h3 className=\"font-size-h1\">\n          {/* <FormattedMessage id=\"AUTH.LOGIN.TITLE\" /> */}\n          Login Account\n        </h3>\n        <p className=\"text-muted font-weight-bold\">\n          Enter your email or username and password\n        </p>\n      </div>\n      {/* end::Head */}\n\n      {/*begin::Form*/}\n      <form\n        onSubmit={formik.handleSubmit}\n        className=\"form fv-plugins-bootstrap fv-plugins-framework\"\n      >\n        {/* โชว์ Use account admin@demo.com and password demo to continue. */}\n        {formik.status ? (\n          <div className=\"mb-10 alert alert-custom alert-light-danger alert-dismissible\">\n            <div className=\"alert-text font-weight-bold\">{formik.status}</div>\n          </div>\n        ) : null}\n\n        <div className=\"form-group fv-plugins-icon-container\">\n          <input\n            placeholder=\"Email\"\n            type=\"email\"\n            className={`form-control form-control-solid h-auto py-5 px-6 ${getInputClasses(\n              \"email\"\n            )}`}\n            name=\"email\"\n            {...formik.getFieldProps(\"email\")}\n          />\n          {formik.touched.email && formik.errors.email ? (\n            <div className=\"fv-plugins-message-container\">\n              <div className=\"fv-help-block\">{formik.errors.email}</div>\n            </div>\n          ) : null}\n        </div>\n        <div className=\"form-group fv-plugins-icon-container\">\n          <input\n            placeholder=\"Password\"\n            type=\"password\"\n            className={`form-control form-control-solid h-auto py-5 px-6 ${getInputClasses(\n              \"password\"\n            )}`}\n            name=\"password\"\n            {...formik.getFieldProps(\"password\")}\n          />\n          {formik.touched.password && formik.errors.password ? (\n            <div className=\"fv-plugins-message-container\">\n              <div className=\"fv-help-block\">{formik.errors.password}</div>\n            </div>\n          ) : null}\n        </div>\n        <div className=\"form-group d-flex flex-wrap justify-content-between align-items-center\">\n          <Link\n            to=\"/auth/forgot-password\"\n            className=\"text-dark-50 text-hover-primary my-3 mr-2\"\n            id=\"kt_login_forgot\"\n          >\n            Forgot Password\n            {/* <FormattedMessage id=\"AUTH.GENERAL.FORGOT_BUTTON\" /> */}\n          </Link>\n          <button\n            id=\"kt_login_signin_submit\"\n            type=\"submit\"\n            disabled={formik.isSubmitting}\n            className={`btn btn-primary font-weight-bold px-9 py-4 my-3`}\n          >\n            <span>Sign In</span>\n            {loading && <span className=\"ml-3 spinner spinner-white\"></span>}\n          </button>\n        </div>\n      </form>\n      {/*end::Form*/}\n    </div>\n  );\n}\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}